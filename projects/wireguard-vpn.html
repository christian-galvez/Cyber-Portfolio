<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WireGuard VPN on DigitalOcean - Christian Galvez</title>
  <link rel="stylesheet" href="../assets/styles.css">
  <style>
    .back-link {
      display: inline-block;
      margin-top: 20px;
      padding: 8px 12px;
      background: #1a3c6e;
      color: #fff;
      text-decoration: none;
      border-radius: 4px;
    }
    .back-link:hover {
      background: #274a8c;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <header>
  <nav class="navbar">
    <div class="navbar-left">
      <img src="../assets/DCAEEF16-B5FD-4060-82A9-BB73BE65BBE6.png" alt="Logo" class="logo"> <!-- Replace with your logo path -->
      <h1 class="site-title">Cybersecurity Portfolio</h1>
    </div>
    <div class="navbar-right">
      <ul class="nav-links">
        <li><a href="../index.html">Home</a></li>
        <li><a href="../projects.html">Projects</a></li>
        <li><a href="../about.html">About</a></li>
        <li><a href="../contact.html">Contact</a></li>
      </ul>
    </div>
  </nav>
</header>

  <main>
    
    <section class="hero">
      <h1>üöÄ Project: WireGuard VPN on DigitalOcean</h1>
      <p><strong>Summary:</strong> This project demonstrates the design, deployment, and configuration of a secure WireGuard VPN server hosted on a DigitalOcean droplet.
      The VPN allows secure remote access from multiple clients (mobile and laptop), ensuring encrypted traffic tunneling and anonymity while browsing the internet.</p>
    </section>
    
    <p>The project showcases my skills in:</p>
    <ul>
      <li>Linux server administration</li>
      <li>VPN configuration (WireGuard)</li>
      <li>SSH management and troubleshooting</li>
      <li>Network routing, firewall (iptables), and NAT configuration</li>
      <li>Secure client provisioning across devices (iOS + Windows/Linux)</li>
    </ul>

    <h2>üõ†Ô∏è Tools & Technologies</h2>
    <ul>
      <li>DigitalOcean Droplet (Ubuntu 22.04 LTS)</li>
      <li>WireGuard VPN</li>
      <li>iOS WireGuard App</li>
      <li>Windows WireGuard Client</li>
      <li>SSH (OpenSSH)</li>
      <li>iptables for firewall and NAT rules</li>
    </ul>

    <h2>‚öôÔ∏è Implementation Steps</h2>

    <h3>1. Server Setup</h3>
    <p>Deployed a fresh Ubuntu server on DigitalOcean.</p>
    <img src="https://github.com/user-attachments/assets/142f5eee-2629-491c-98b6-c0c0bb5c6702" alt="Server setup screenshot" style="max-width:100%; border: 1px solid #ccc; border-radius: 6px;" />

    <p>Updated system and installed WireGuard:</p>
    <pre><code>sudo apt update && sudo apt upgrade -y
sudo apt install wireguard -y</code></pre>
    <img src="https://github.com/user-attachments/assets/84fa5a7f-7d0d-4137-baca-7067353a3527" alt="WireGuard install screenshot" style="max-width:100%; border: 1px solid #ccc; border-radius: 6px;" />

    <h3>2. Key Generation</h3>
    <p>Generated server private/public keys. Generated unique private/public keys for each client device.</p>
    <pre><code>wg genkey | tee server_private.key | wg pubkey > server_public.key
wg genkey | tee client_private.key | wg pubkey > client_public.key</code></pre>
    <img src="https://github.com/user-attachments/assets/5c94b78f-abb2-4d3e-bb3a-e962d7b7d1de" alt="Key generation screenshot" style="max-width:100%; border: 1px solid #ccc; border-radius: 6px;" />

    <h3>3. Server Configuration (wg0.conf)</h3>
    <img src="https://github.com/user-attachments/assets/84023782-1d06-4422-8919-0ca61faf497f" alt="wg0.conf server configuration screenshot" style="max-width:100%; border: 1px solid #ccc; border-radius: 6px;" />
    <pre><code>[Interface]
Address = 10.0.0.1/24
ListenPort = 51820
PrivateKey = &lt;server_private_key&gt;

PostUp   = iptables -A FORWARD -i %i -j ACCEPT; \
           iptables -A FORWARD -o %i -j ACCEPT; \
           iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE; \
           iptables -I INPUT 1 -p tcp --dport 22 -j ACCEPT

PostDown = iptables -D FORWARD -i %i -j ACCEPT; \
           iptables -D FORWARD -o %i -j ACCEPT; \
           iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE; \
           iptables -D INPUT -p tcp --dport 22 -j ACCEPT</code></pre>

    <h3>4. Peer Configuration</h3>
    <p>Each client (phone, laptop) was assigned its own configuration file.</p>
    <pre><code>[Interface]
PrivateKey = &lt;client_private_key&gt;
Address = 10.0.0.2/24
DNS = 1.1.1.1

[Peer]
PublicKey = &lt;server_public_key&gt;
Endpoint = &lt;server_ip&gt;:51820
AllowedIPs = 0.0.0.0/0, ::/0</code></pre>

    <h3>5. Client Deployment</h3>
    <p>Imported the configuration file into the WireGuard mobile app (via QR code).</p>
    <p>Imported the configuration into the WireGuard Windows client via .conf file.</p>

    <h3>6. Validation</h3>
    <p>Verified handshakes with:</p>
    <pre><code>sudo wg</code></pre>
    <img src="https://github.com/user-attachments/assets/4c95e5e4-02a7-4af3-a0e6-819e55e657aa" alt="Validation with sudo wg screenshot" style="max-width:100%; border: 1px solid #ccc; border-radius: 6px;" />

    <h3>7. Hardening</h3>
    <p>Enabled firewall with UFW:</p>
    <pre><code>sudo ufw allow 22/tcp
sudo ufw allow 51820/udp
sudo ufw enable</code></pre>
    <p>Confirmed both devices appeared as connected peers. Tested by browsing to 
      <a href="https://whatismyipaddress.com" target="_blank">whatismyipaddress.com</a>
      and confirming traffic originated from the VPN server‚Äôs IP.
    </p>

    <h2>üîê Lessons Learned</h2>
    <ul>
      <li><strong>Firewall:</strong> Implementing WireGuard VPN highlighted the critical importance of firewall hardening to minimize attack surfaces.</li>
      <li><strong>Routing/NAT:</strong> Proper PostUp and PostDown rules are critical for allowing VPN clients to reach the internet.</li>
      <li><strong>Access Control:</strong> Each client must have unique keys and AllowedIPs defined, preventing overlaps.</li>
      <li><strong>SSH Lockout Prevention:</strong> Adding explicit iptables rules to keep SSH open prevents accidental lockouts.</li>
      <li><strong>Cross-Device Deployment:</strong> Configuring and testing across iPhone + Windows laptop demonstrated real-world secure access scenarios.</li>
    </ul>

    <a class="back-link" href="../projects.html">‚¨ÖÔ∏è Back to Projects</a>
  </main>

  <footer>
    <p>¬© 2025 Christian Galvez</p>
  </footer>
</body>
</html>
